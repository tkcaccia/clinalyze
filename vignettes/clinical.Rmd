---
title: "Knowledge Discovery by Accuracy Maximization"
author: "Stefano Cacciatore, Leonardo Tenori"
date: "`r Sys.Date()`"
output:
  pdf_document:
    highlight: null
    number_sections: no
    fig_caption: yes
vignette: >
  %\VignetteIndexEntry{Knowledge Discovery by Accuracy Maximization}
  %\VignetteDepends{clinical}
  %\VignetteKeywords{clinical}
  %\VignettePackage{clinical}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---


# Introduction

The `clinical` package is designed to facilitate exploratory data analysis and statistical testing on clinical datasets. This vignette presents the full usage of all core functions included in the package.

 
## 2	Installation

### 2.1 Installation via CRAN

The R package clinical  is part of the Comprehensive R Archive Network (CRAN)^[https://cran.r-project.org/]. The simplest way to install the package is to enter the following command into your R session: `install.packages("clinical")`. We suggest to install the R package `rgl` for the data visualization in 3D interactive plots.


### 2.3 Compatibility issues

All versions downloadable from CRAN have been built using R version, R.3.2.3. The package should work without major issues on R versions > 3.0.0.

## 3  Getting Started 

To load the package, enter the following instruction in your R session:

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(clinical)  # <- THIS IS CRITICAL
```


If this command terminates without any error messages, you can be sure that the package has been installed successfully. The clinical package is now ready for use.

The package includes both a user manual (this document) and a reference manual (help pages for each function). To view the user manual, enter `vignette("clinical")`. Help pages can be viewed using the help command `help(package="clinical")`.




# Simulated Data

```{r}
set.seed(123)
n <- 100
data <- data.frame(
  Age = rnorm(n, mean = 60, sd = 10),
  BMI = rnorm(n, mean = 25, sd = 4),
  Gender = sample(c("Male", "Female"), n, replace = TRUE),
  Hospital = sample(c("A", "B"), n, replace = TRUE),
  Diagnosis = sample(c("Low", "Medium", "High"), n, replace = TRUE)
)
```


# Function: `txtsummary`

Returns a textual summary of a numeric vector using either the mean or median and a measure of variability.

```{r}
txtsummary(data$Age, f = "mean", digits = 2, range = "IQR")
```

# Function: `continuous.test`

Performs a statistical comparison of a continuous variable across groups.

```{r}
continuous_test_result <- continuous.test("Age", data$Age, data$Hospital, center = "mean", range = "sd")
print(continuous_test_result)
```

# Function: `categorical.test`

Performs a Fisher's exact test or chi-square test on a categorical variable across groups and returns formatted output.

```{r}
categorical_test_result <- categorical.test("Gender", data$Gender, data$Hospital)
print(categorical_test_result)
```

# Function: `correlation.test`

Computes Pearson, Spearman, or MINE correlation between two numeric vectors.

```{r}
correlation_result <- correlation.test(data$Age, data$BMI, method = "spearman", name = "Age vs BMI")
print(correlation_result)
```

# Function: `multi_analysis`

Applies a test (continuous or correlation) across multiple features of a dataset.

```{r}
multi_cont <- multi_analysis(data[, c("Age", "BMI")], data$Hospital, FUN = "continuous.test")
print(multi_cont)
```

```{r}
multi_corr <- multi_analysis(data[, c("Age", "BMI")], data$BMI, FUN = "correlation.test")
print(multi_corr)
```

# Function: `multi_test`

Runs either `continuous.test` or `categorical.test` automatically on each column depending on the data type.

```{r}
multi_test_result <- multi_test(data[, c("Age", "BMI", "Gender")], data$Hospital)
print(multi_test_result)
```

# Function: `intersect`

Finds the intersection of multiple vectors.

```{r}
v1 <- c("A", "B", "C")
v2 <- c("B", "C", "D")
v3 <- c("C", "B", "E")

intersect(v1, v2, v3)
```

# Function: `frequency_matching`

Matches samples across classes (e.g., control vs case) by discretizing numeric features into bins and stratifying selection.

```{r}
match_result <- frequency_matching(data[, c("Age", "BMI")], label = data$Hospital)
head(match_result$data)
```

# Conclusion

The `clinical` package provides an extensive toolkit for evaluating clinical datasets, from statistical comparisons to frequency matching and summarization. This vignette serves as a comprehensive guide for using each function effectively.
